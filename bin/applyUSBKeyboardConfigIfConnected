#! /bin/bash

function isUSBKeyboardConnected {
	xinput | grep -ci "usb keyboard"
}

function applyUSBKeyboardConfig {
	setxkbmap -layout no_modified -variant mac -option lv3:lwin_switch,altwin:swap_alt_win
}

function applyOnboardKeyboardConfig {
	setxkbmap -layout no_modified -variant mac -option lv3:lalt_switch,caps:ctrl_modifier
}

function clearKeyboardConfig {
	setxkbmap -option
}

function applyCorrectKeyboardConfig {
	clearKeyboardConfig

	if isUSBKeyboardConnected
	then
		applyUSBKeyboardConfig
	else
		applyOnboardKeyboardConfig
	fi
}

applyCorrectKeyboardConfig
